{% extends 'base.html.twig' %}

{% block title %}Prestations{% endblock %}

{% block body %}


<div class="container my-4">

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}

    {% if is_granted('ROLE_ADMIN') %}
        <h2>Ajouter une prestation</h2>
        {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
            {{ form_row(form.article) }}
            {{ form_row(form.imageFile) }}
            <button type="submit" class="btn btn-primary mt-3">Enregistrer</button>
        {{ form_end(form) }}
        <hr class="my-4">
    {% endif %}

    <h3>Liste des prestations</h3>
    {% if prestations is not empty %}
        {% for prestation in prestations %}
            <div class="prestation shadow-sm">
                <div class="row g-0">
                    <div class="col-md-4">
                        <p>{{ prestation.article|raw }}</p>
                    </div>
                    <div class="col-md-8">
                        {% if prestation.image %}
                            <img src="/{{ prestation.image }}" alt="Image de la prestation">
                        {% else %}
                            <p class="text-muted text-center mt-4">Aucune image pour cette prestation</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-muted text-center">Aucune prestation enregistr√©e pour le moment.</p>
    {% endif %}
</div>
{% endblock %}
