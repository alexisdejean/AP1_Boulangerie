{% extends 'base.html.twig' %}

{% block title %}Prestations{% endblock %}

{% block body %}
<div class="container my-4">

    {# Flash messages #}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}

    {# Formulaire pour les admins #}
    {% if is_granted('ROLE_ADMIN') %}
        <h2>Ajouter une prestation</h2>
        {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
            {{ form_row(form.article) }}
            {{ form_row(form.imageFile) }}
            <button type="submit" class="btn btn-primary mt-3">Enregistrer</button>
        {{ form_end(form) }}
        <hr class="my-4">
    {% endif %}

    <h3>Liste des prestations</h3>
    {% if prestations is not empty %}
        {% for prestation in prestations %}
            <div class="prestation my-4 p-3 border rounded shadow-sm">
                <div class="row align-items-center">
                    <div class="col-md-4">
                        <p>{{ prestation.article|raw }}</p>
                    </div>
                    <div class="col-md-8 text-center">
                        {% if prestation.image %}
                            <img src="/{{ prestation.image }}" class="img-fluid rounded shadow" style="width: 100%; height: auto;">
                        {% else %}
                            <p class="text-muted">Aucune image pour cette prestation</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-muted">Aucune prestation enregistr√©e pour le moment.</p>
    {% endif %}

</div>
{% endblock %}
