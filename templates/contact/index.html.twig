{% extends 'base.html.twig' %}

{% block title %}Contact{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    .flash-message { margin-bottom: 1rem; }
</style>

<div class="example-wrapper">

    {# Messages flash success #}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success flash-message">{{ message }}</div>
    {% endfor %}

    {# Messages flash error #}
    {% for message in app.flashes('error') %}
        <div class="alert alert-danger flash-message">{{ message }}</div>
    {% endfor %}

    <h1>Contact</h1>
    <form action="{{ path('app_contact') }}" method="POST">
        <div class="card text-white bg-primary mb-3" id="carte-contact" style="max-width: 20rem;">
            <div class="card-header">
                {# Préremplissage du numéro et champ readonly si déjà défini #}
                <input type="text" class="form-control" name="numero" 
                       placeholder="Numéro de téléphone" 
                       value="{{ app.user.telephone ?: '' }}"
                       {% if app.user.telephone %}readonly{% endif %}>
            </div>
            <div class="card-body">
                <textarea class="form-control" name="commentaire" rows="3" placeholder="Commentaire"></textarea>
                {% if app.user %}
                    <input type="submit" class="btn btn-light mt-2" value="Envoyer">
                {% else %}
                    <p class="text-warning mt-2">Vous devez être connecté pour envoyer un message.</p>
                {% endif %}
            </div>
        </div>
    </form>
</div>
{% endblock %}
