{% extends 'base.html.twig' %}

{% block title %}Présentation{% endblock %}

{% block body %}
<div class="container my-4">
    <div class="card text-white bg-primary mb-3">
        <div class="card-body text-center">

            {# Image de présentation #}
            {% if presentation.imagePresentation %}
                <img src="/{{ presentation.imagePresentation }}?{{ random() }}" 
                     alt="Image de présentation" 
                     class="img-fluid mb-3 rounded shadow" 
                     style="max-height: 300px; object-fit: cover; background: white;">
            {% else %}
                <p class="text-light">Aucune image pour le moment</p>
            {% endif %}

            {# Flash messages #}
            {% for message in app.flashes('success') %}
                <div class="alert alert-success">{{ message }}</div>
            {% endfor %}
            {% for message in app.flashes('error') %}
                <div class="alert alert-danger">{{ message }}</div>
            {% endfor %}

            {# Formulaire admin stylisé #}
            {% if is_granted('ROLE_ADMIN') %}
                <div class="form-prestation">
                    <h2>Modifier la présentation</h2>
                    {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}

                        {{ form_widget(form.description_presentation, {'attr': {'placeholder': 'Description de la présentation'}}) }}

                        {{ form_widget(form.imageFile) }}

                        {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary'}}) }}

                    {{ form_end(form) }}
                </div>
            {% else %}
                {% if presentation.descriptionPresentation %}
                    <p class="card-text mt-3">{{ presentation.descriptionPresentation }}</p>
                {% else %}
                    <p class="text-light">Aucune description disponible.</p>
                {% endif %}
            {% endif %}

        </div>
    </div>
</div>
{% endblock %}
